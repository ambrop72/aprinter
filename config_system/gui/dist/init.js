/*
 * Copyright (c) 2015 Ambroz Bizjak
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

// The schema. The value is provided by the build script.
var schema = {"additionalProperties":false,"id":"id_editor","options":{"disable_collapse":true,"no_header":true},"properties":{"_compoundName":{"constantValue":"editor","options":{"hidden":true}},"boards":{"items":{"additionalProperties":false,"headerTemplate":"return vars.self[\"name\"];","id":"id_board","options":{"collapsed":true},"properties":{"EventChannelTimer":{"additionalProperties":false,"id":"id_interrupt_timer_choice","options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"interrupt_timer","options":{"hidden":true}},"lalal":{"excludeFromFinalValue":true,"valueTemplate":"return ce_deref(ce_refarr(vars,[\"watch_array\",\"clock\",\"avail_oc_units\"]),\"value\",vars.watch_id);","watch":{"watch_array":"id_board.platform_config.platform","watch_id":"id_interrupt_timer_choice.oc_unit"}},"oc_unit":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"clock\",\"avail_oc_units\"]);","title":"return vars.item[\"value\"];","value":"return vars.item[\"value\"];"},"propertyOrder":0,"title":"Output compare unit","type":"string","watch":{"watch_array":"id_board.platform_config.platform"}}},"propertyOrder":3,"title":"Event channel timer","type":"object"},"LedPin":{"propertyOrder":2,"title":"LED pin","type":"string"},"_compoundName":{"constantValue":"board","options":{"hidden":true}},"analog_inputs":{"items":{"additionalProperties":false,"headerTemplate":"return vars.self[\"Name\"];","options":{"collapsed":true},"properties":{"Name":{"propertyOrder":0,"title":"Name","type":"string"},"Pin":{"propertyOrder":1,"title":"Pin","type":"string"},"_compoundName":{"constantValue":"analog_input","options":{"hidden":true}}},"title":"Analog input","type":"object"},"options":{"disable_collapse":true},"propertyOrder":10,"title":"Analog inputs","type":"array"},"digital_inputs":{"items":{"additionalProperties":false,"headerTemplate":"return vars.self[\"Name\"];","id":"id_board_digital_inputs","options":{"collapsed":true},"properties":{"InputMode":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"pins\",\"input_modes\"]);","title":"return vars.item[\"name\"];","value":"return vars.item[\"ident\"];"},"propertyOrder":2,"title":"Input mode","type":"string","watch":{"watch_array":"id_board.platform_config.platform"}},"Name":{"propertyOrder":0,"title":"Name","type":"string"},"Pin":{"propertyOrder":1,"title":"Pin","type":"string"},"_compoundName":{"constantValue":"digital_input","options":{"hidden":true}}},"title":"Digital input","type":"object"},"options":{"disable_collapse":true},"propertyOrder":9,"title":"Digital inputs","type":"array"},"name":{"propertyOrder":0,"title":"Name (modifying will break references from configurations and lose data)","type":"string"},"performance":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"AxisDriverPrecisionParams":{"enum":["AxisDriverAvrPrecisionParams","AxisDriverDuePrecisionParams"],"propertyOrder":6,"title":"Stepping precision parameters","type":"string"},"EventChannelBufferSize":{"propertyOrder":2,"title":"Event channel buffer size","type":"integer"},"EventChannelTimerClearance":{"propertyOrder":7,"title":"Event channel timer clearance","type":"number"},"FpType":{"enum":["float","double"],"propertyOrder":5,"type":"string"},"LookaheadBufferSize":{"propertyOrder":3,"title":"Lookahead buffer size","type":"integer"},"LookaheadCommitCount":{"propertyOrder":4,"title":"Lookahead commit count","type":"integer"},"MaxStepsPerCycle":{"propertyOrder":0,"title":"Max steps per cycle","type":"number"},"StepperSegmentBufferSize":{"propertyOrder":1,"title":"Stepper segment buffer size","type":"integer"},"_compoundName":{"constantValue":"performance","options":{"hidden":true}}},"propertyOrder":7,"title":"Performance parameters","type":"object"},"platform_config":{"additionalProperties":false,"options":{"collapsed":true},"processingOrder":-1,"properties":{"_compoundName":{"constantValue":"PlatformConfig","options":{"hidden":true}},"board_for_build":{"propertyOrder":0,"title":"Board for building (see nix/boards.nix)","type":"string"},"board_helper_includes":{"format":"table","items":{"title":"Name","type":"string"},"options":{"disable_collapse":true},"propertyOrder":2,"title":"Board helper includes","type":"array"},"output_type":{"enum":["hex","bin"],"propertyOrder":1,"title":"Build output type","type":"string"},"platform":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"At91Sam3x8e","options":{"hidden":true}},"adc":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"_compoundName":{"constantValue":"At91SamAdc","options":{"hidden":true}},"avg_interval":{"propertyOrder":1,"title":"Averaging interval","type":"number"},"freq":{"propertyOrder":0,"title":"Frequency","type":"number"},"settling":{"propertyOrder":4,"title":"Settling time","type":"integer"},"smoothing":{"propertyOrder":2,"title":"Smoothing factor","type":"number"},"startup":{"propertyOrder":3,"title":"Startup time","type":"integer"},"tracking":{"propertyOrder":5,"title":"Tracking time","type":"integer"},"transfer":{"propertyOrder":6,"title":"Transfer time","type":"integer"}},"propertyOrder":1,"title":"ADC","type":"object"},"clock":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"_compoundName":{"constantValue":"At91Sam3xClock","options":{"hidden":true}},"avail_oc_units":{"constantValue":[{"value":"TC0A"},{"value":"TC0B"},{"value":"TC0C"},{"value":"TC1A"},{"value":"TC1B"},{"value":"TC1C"},{"value":"TC2A"},{"value":"TC2B"},{"value":"TC2C"},{"value":"TC3A"},{"value":"TC3B"},{"value":"TC3C"},{"value":"TC4A"},{"value":"TC4B"},{"value":"TC4C"},{"value":"TC5A"},{"value":"TC5B"},{"value":"TC5C"},{"value":"TC6A"},{"value":"TC6B"},{"value":"TC6C"},{"value":"TC7A"},{"value":"TC7B"},{"value":"TC7C"},{"value":"TC8A"},{"value":"TC8B"},{"value":"TC8C"}],"options":{"hidden":true},"propertyOrder":2},"prescaler":{"propertyOrder":0,"title":"Prescaler","type":"integer"},"primary_timer":{"propertyOrder":1,"title":"Primary timer","type":"string"}},"propertyOrder":0,"title":"Clock","type":"object"},"pins":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"_compoundName":{"constantValue":"At91SamPins","options":{"hidden":true}},"input_modes":{"constantValue":[{"ident":"At91SamPinInputModeNormal","name":"Normal"},{"ident":"At91SamPinInputModePullUp","name":"Pull-up"}],"options":{"hidden":true},"propertyOrder":0}},"propertyOrder":3,"title":"Pins","type":"object"},"pwm":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"Disabled","options":{"hidden":true}}},"title":"Disabled","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"DivA":{"propertyOrder":1,"title":"Divisor A","type":"integer"},"DivB":{"propertyOrder":3,"title":"Divisor B","type":"integer"},"PreA":{"propertyOrder":0,"title":"Prescaler A","type":"integer"},"PreB":{"propertyOrder":2,"title":"Prescaler B","type":"integer"},"_compoundName":{"constantValue":"At91Sam3xPwm","options":{"hidden":true}}},"title":"Enabled","type":"object"}],"propertyOrder":4,"selectKey":"_compoundName","title":"PWM module"},"watchdog":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"Wdv":{"propertyOrder":0,"title":"Wdv","type":"integer"},"_compoundName":{"constantValue":"At91SamWatchdog","options":{"hidden":true}}},"propertyOrder":2,"title":"Watchdog","type":"object"}},"title":"At91Sam3x8e","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"Teensy3","options":{"hidden":true}},"adc":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"AdcADiv":{"propertyOrder":0,"title":"AdcADiv","type":"integer"},"_compoundName":{"constantValue":"Mk20Adc","options":{"hidden":true}}},"propertyOrder":1,"title":"ADC","type":"object"},"clock":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"_compoundName":{"constantValue":"Mk20Clock","options":{"hidden":true}},"avail_oc_units":{"constantValue":[{"value":"FTM0_0"},{"value":"FTM0_1"},{"value":"FTM0_2"},{"value":"FTM0_3"},{"value":"FTM0_4"},{"value":"FTM0_5"},{"value":"FTM0_6"},{"value":"FTM0_7"},{"value":"FTM1_0"},{"value":"FTM1_1"}],"options":{"hidden":true},"propertyOrder":2},"prescaler":{"propertyOrder":0,"title":"Prescaler","type":"integer"},"primary_timer":{"propertyOrder":1,"title":"Primary timer","type":"string"}},"propertyOrder":0,"title":"Clock","type":"object"},"pins":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"_compoundName":{"constantValue":"Mk20Pins","options":{"hidden":true}},"input_modes":{"constantValue":[{"ident":"Mk20PinInputModeNormal","name":"Normal"},{"ident":"Mk20PinInputModePullUp","name":"Pull-up"},{"ident":"Mk20PinInputModePullDown","name":"Pull-down"}],"options":{"hidden":true},"propertyOrder":0}},"propertyOrder":3,"title":"Pins","type":"object"},"watchdog":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"Prescval":{"propertyOrder":1,"title":"Prescaler value","type":"integer"},"Toval":{"propertyOrder":0,"title":"Timeout value","type":"integer"},"_compoundName":{"constantValue":"Mk20Watchdog","options":{"hidden":true}}},"propertyOrder":2,"title":"Watchdog","type":"object"}},"title":"Teensy3","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"AVR ATmega2560","options":{"hidden":true}},"adc":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"Prescaler":{"propertyOrder":1,"type":"integer"},"RefSel":{"propertyOrder":0,"type":"integer"},"_compoundName":{"constantValue":"AvrAdc","options":{"hidden":true}}},"propertyOrder":1,"title":"ADC","type":"object"},"clock":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"PrescaleDivide":{"propertyOrder":0,"title":"Prescaler (as division factor)","type":"integer"},"_compoundName":{"constantValue":"AvrClock","options":{"hidden":true}},"avail_oc_units":{"constantValue":[{"value":"TC0_A"},{"value":"TC0_B"},{"value":"TC1_A"},{"value":"TC1_B"},{"value":"TC1_C"},{"value":"TC2_A"},{"value":"TC2_B"},{"value":"TC3_A"},{"value":"TC3_B"},{"value":"TC3_C"},{"value":"TC4_A"},{"value":"TC4_B"},{"value":"TC4_C"},{"value":"TC5_A"},{"value":"TC5_B"},{"value":"TC5_C"}],"options":{"hidden":true},"propertyOrder":2},"primary_timer":{"propertyOrder":1,"title":"Primary timer","type":"string"},"timers":{"items":{"additionalProperties":false,"headerTemplate":"return vars.self[\"Timer\"];","options":{"collapsed":true},"properties":{"Mode":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"AvrClockTcModeClock","options":{"hidden":true}}},"title":"Normal (for interrupt-timers)","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"PrescaleDivide":{"propertyOrder":0,"type":"integer"},"_compoundName":{"constantValue":"AvrClockTcMode8BitPwm","options":{"hidden":true}}},"title":"PWM 8-bit (for Hard-PWM)","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"PrescaleDivide":{"propertyOrder":0,"type":"integer"},"TopVal":{"propertyOrder":1,"type":"integer"},"_compoundName":{"constantValue":"AvrClockTcMode16BitPwm","options":{"hidden":true}}},"title":"PWM 16-bit (for Hard-PWM)","type":"object"}],"propertyOrder":1,"selectKey":"_compoundName","title":"Mode"},"Timer":{"propertyOrder":0,"type":"string"},"_compoundName":{"constantValue":"Timer","options":{"hidden":true}}},"title":"Timer","type":"object"},"options":{"disable_collapse":true},"propertyOrder":3,"title":"Timer configuration","type":"array"}},"propertyOrder":0,"title":"Clock","type":"object"},"pins":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"_compoundName":{"constantValue":"AvrPins","options":{"hidden":true}},"input_modes":{"constantValue":[{"ident":"AvrPinInputModeNormal","name":"Normal"},{"ident":"AvrPinInputModePullUp","name":"Pull-up"}],"options":{"hidden":true},"propertyOrder":0}},"propertyOrder":3,"title":"Pins","type":"object"},"watchdog":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"Timeout":{"propertyOrder":0,"title":"Timeout (WDTO_*)","type":"string"},"_compoundName":{"constantValue":"AvrWatchdog","options":{"hidden":true}}},"propertyOrder":2,"title":"Watchdog","type":"object"}},"title":"AVR ATmega2560","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"AVR ATmega1284p","options":{"hidden":true}},"adc":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"Prescaler":{"propertyOrder":1,"type":"integer"},"RefSel":{"propertyOrder":0,"type":"integer"},"_compoundName":{"constantValue":"AvrAdc","options":{"hidden":true}}},"propertyOrder":1,"title":"ADC","type":"object"},"clock":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"PrescaleDivide":{"propertyOrder":0,"title":"Prescaler (as division factor)","type":"integer"},"_compoundName":{"constantValue":"AvrClock","options":{"hidden":true}},"avail_oc_units":{"constantValue":[{"value":"TC0_A"},{"value":"TC0_B"},{"value":"TC1_A"},{"value":"TC1_B"},{"value":"TC2_A"},{"value":"TC2_B"},{"value":"TC3_A"},{"value":"TC3_B"}],"options":{"hidden":true},"propertyOrder":2},"primary_timer":{"propertyOrder":1,"title":"Primary timer","type":"string"},"timers":{"items":{"additionalProperties":false,"headerTemplate":"return vars.self[\"Timer\"];","options":{"collapsed":true},"properties":{"Mode":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"AvrClockTcModeClock","options":{"hidden":true}}},"title":"Normal (for interrupt-timers)","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"PrescaleDivide":{"propertyOrder":0,"type":"integer"},"_compoundName":{"constantValue":"AvrClockTcMode8BitPwm","options":{"hidden":true}}},"title":"PWM 8-bit (for Hard-PWM)","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"PrescaleDivide":{"propertyOrder":0,"type":"integer"},"TopVal":{"propertyOrder":1,"type":"integer"},"_compoundName":{"constantValue":"AvrClockTcMode16BitPwm","options":{"hidden":true}}},"title":"PWM 16-bit (for Hard-PWM)","type":"object"}],"propertyOrder":1,"selectKey":"_compoundName","title":"Mode"},"Timer":{"propertyOrder":0,"type":"string"},"_compoundName":{"constantValue":"Timer","options":{"hidden":true}}},"title":"Timer","type":"object"},"options":{"disable_collapse":true},"propertyOrder":3,"title":"Timer configuration","type":"array"}},"propertyOrder":0,"title":"Clock","type":"object"},"pins":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"_compoundName":{"constantValue":"AvrPins","options":{"hidden":true}},"input_modes":{"constantValue":[{"ident":"AvrPinInputModeNormal","name":"Normal"},{"ident":"AvrPinInputModePullUp","name":"Pull-up"}],"options":{"hidden":true},"propertyOrder":0}},"propertyOrder":3,"title":"Pins","type":"object"},"watchdog":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"Timeout":{"propertyOrder":0,"title":"Timeout (WDTO_*)","type":"string"},"_compoundName":{"constantValue":"AvrWatchdog","options":{"hidden":true}}},"propertyOrder":2,"title":"Watchdog","type":"object"}},"title":"AVR ATmega1284p","type":"object"}],"processingOrder":-1,"propertyOrder":3,"selectKey":"_compoundName","title":"Platform"}},"propertyOrder":1,"title":"Platform configuration","type":"object"},"pwm_outputs":{"items":{"additionalProperties":false,"headerTemplate":"return vars.self[\"Name\"];","options":{"collapsed":true},"properties":{"Backend":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"OutputInvert":{"enum":[false,true],"options":{"enum_titles":["Normal (On=High)","Inverted (On=Low)"]},"propertyOrder":1,"title":"Output logic","type":"boolean"},"OutputPin":{"propertyOrder":0,"title":"Output pin","type":"string"},"PulseInterval":{"propertyOrder":2,"title":"PWM pulse duration","type":"number"},"Timer":{"additionalProperties":false,"id":"id_interrupt_timer_choice","options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"interrupt_timer","options":{"hidden":true}},"lalal":{"excludeFromFinalValue":true,"valueTemplate":"return ce_deref(ce_refarr(vars,[\"watch_array\",\"clock\",\"avail_oc_units\"]),\"value\",vars.watch_id);","watch":{"watch_array":"id_board.platform_config.platform","watch_id":"id_interrupt_timer_choice.oc_unit"}},"oc_unit":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"clock\",\"avail_oc_units\"]);","title":"return vars.item[\"value\"];","value":"return vars.item[\"value\"];"},"propertyOrder":0,"title":"Output compare unit","type":"string","watch":{"watch_array":"id_board.platform_config.platform"}}},"propertyOrder":3,"title":"Soft PWM Timer","type":"object"},"_compoundName":{"constantValue":"SoftPwm","options":{"hidden":true}}},"title":"SoftPwm","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"HardPwmDriver":{"oneOf":[{"additionalProperties":false,"id":"id_pwm_output","options":{"disable_collapse":true},"properties":{"OutputPin":{"propertyOrder":1,"title":"Output pin (determined by OC unit)","type":"string"},"_compoundName":{"constantValue":"AvrClockPwm","options":{"hidden":true}},"lalal":{"excludeFromFinalValue":true,"valueTemplate":"return ce_deref(ce_refarr(vars,[\"watch_array\",\"clock\",\"avail_oc_units\"]),\"value\",vars.watch_id);","watch":{"watch_array":"id_board.platform_config.platform","watch_id":"id_pwm_output.oc_unit"}},"oc_unit":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"clock\",\"avail_oc_units\"]);","title":"return vars.item[\"value\"];","value":"return vars.item[\"value\"];"},"propertyOrder":0,"title":"Output compare unit","type":"string","watch":{"watch_array":"id_board.platform_config.platform"}}},"title":"AvrClockPwm","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"ChannelNumber":{"propertyOrder":2,"title":"Channel number","type":"integer"},"ChannelPeriod":{"propertyOrder":1,"title":"Channel period value","type":"integer"},"ChannelPrescaler":{"propertyOrder":0,"title":"Channel prescaler","type":"integer"},"OutputPin":{"propertyOrder":3,"title":"Output pin (constrained by choice of channel/signal)","type":"string"},"Signal":{"propertyOrder":4,"title":"Connection type (L/H)","type":"string"},"_compoundName":{"constantValue":"At91Sam3xPwmChannel","options":{"hidden":true}}},"title":"At91Sam3xPwmChannel","type":"object"}],"propertyOrder":0,"selectKey":"_compoundName","title":"Hard-PWM driver"},"_compoundName":{"constantValue":"HardPwm","options":{"hidden":true}}},"title":"HardPwm","type":"object"}],"propertyOrder":1,"selectKey":"_compoundName","title":"Backend"},"Name":{"propertyOrder":0,"title":"Name","type":"string"},"_compoundName":{"constantValue":"pwm_output","options":{"hidden":true}}},"title":"PWM output","type":"object"},"options":{"disable_collapse":true},"propertyOrder":11,"title":"PWM outputs","type":"array"},"runtime_config":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"_compoundName":{"constantValue":"RuntimeConfig","options":{"hidden":true}},"config_manager":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"ConstantConfigManager","options":{"hidden":true}}},"title":"Disabled","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"ConfigStore":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"NoStore","options":{"hidden":true}}},"title":"None","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"Eeprom":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"BlockSize":{"propertyOrder":3,"type":"integer"},"I2c":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"Ckdiv":{"propertyOrder":1,"type":"integer"},"Device":{"propertyOrder":0,"type":"string"},"I2cFreq":{"propertyOrder":2,"type":"number"},"_compoundName":{"constantValue":"At91SamI2c","options":{"hidden":true}}},"title":"At91SamI2c","type":"object"}],"propertyOrder":0,"selectKey":"_compoundName","title":"I2C backend"},"I2cAddr":{"propertyOrder":1,"type":"integer"},"Size":{"propertyOrder":2,"type":"integer"},"WriteTimeout":{"propertyOrder":4,"type":"number"},"_compoundName":{"constantValue":"I2cEeprom","options":{"hidden":true}}},"title":"I2cEeprom","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"FakeBlockSize":{"propertyOrder":1,"type":"integer"},"Size":{"propertyOrder":0,"type":"integer"},"_compoundName":{"constantValue":"TeensyEeprom","options":{"hidden":true}}},"title":"TeensyEeprom","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"FakeBlockSize":{"propertyOrder":0,"type":"integer"},"_compoundName":{"constantValue":"AvrEeprom","options":{"hidden":true}}},"title":"AvrEeprom","type":"object"}],"propertyOrder":2,"selectKey":"_compoundName","title":"EEPROM backend"},"EndBlock":{"propertyOrder":1,"type":"integer"},"StartBlock":{"propertyOrder":0,"type":"integer"},"_compoundName":{"constantValue":"EepromConfigStore","options":{"hidden":true}}},"title":"EepromConfigStore","type":"object"}],"propertyOrder":0,"selectKey":"_compoundName","title":"Configuration storage"},"_compoundName":{"constantValue":"RuntimeConfigManager","options":{"hidden":true}}},"title":"Enabled","type":"object"}],"propertyOrder":0,"selectKey":"_compoundName","title":"Runtime configuration"}},"propertyOrder":4,"title":"Runtime configuration","type":"object"},"sdcard_config":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"_compoundName":{"constantValue":"SdCardConfig","options":{"hidden":true}},"sdcard":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"NoSdCard","options":{"hidden":true}}},"title":"Disabled","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"BufferBaseSize":{"propertyOrder":0,"title":"Buffer size","type":"integer"},"GcodeParser":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"MaxParts":{"propertyOrder":0,"title":"Maximum number of command parts","type":"integer"},"_compoundName":{"constantValue":"TextGcodeParser","options":{"hidden":true}}},"title":"Text G-code parser","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"MaxParts":{"propertyOrder":0,"title":"Maximum number of command parts","type":"integer"},"_compoundName":{"constantValue":"BinaryGcodeParser","options":{"hidden":true}}},"title":"Binary G-code parser","type":"object"}],"propertyOrder":2,"selectKey":"_compoundName","title":"G-code parser"},"MaxCommandSize":{"propertyOrder":1,"title":"Maximum command size","type":"integer"},"SdCardService":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"SpiService":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"Device":{"propertyOrder":0,"type":"string"},"_compoundName":{"constantValue":"At91SamSpi","options":{"hidden":true}}},"title":"At91SamSpi","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"SpeedDiv":{"propertyOrder":0,"type":"integer"},"_compoundName":{"constantValue":"AvrSpi","options":{"hidden":true}}},"title":"AvrSpi","type":"object"}],"propertyOrder":1,"selectKey":"_compoundName","title":"SPI driver"},"SsPin":{"propertyOrder":0,"title":"SS pin","type":"string"},"_compoundName":{"constantValue":"SpiSdCard","options":{"hidden":true}}},"title":"SPI","type":"object"}],"propertyOrder":3,"selectKey":"_compoundName","title":"Driver"},"_compoundName":{"constantValue":"SdCard","options":{"hidden":true}}},"title":"Enabled","type":"object"}],"propertyOrder":0,"selectKey":"_compoundName","title":"SD card"}},"propertyOrder":6,"title":"SD card configuration","type":"object"},"serial":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"BaudRate":{"propertyOrder":0,"title":"Baud rate","type":"integer"},"GcodeMaxParts":{"propertyOrder":3,"title":"Max parts in GCode command","type":"integer"},"RecvBufferSizeExp":{"propertyOrder":1,"title":"Receive buffer size (power of two exponent)","type":"integer"},"SendBufferSizeExp":{"propertyOrder":2,"title":"Send buffer size (power of two exponent)","type":"integer"},"Service":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"AsfUsbSerial","options":{"hidden":true}}},"title":"AT91 USB","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"At91Sam3xSerial","options":{"hidden":true}}},"title":"AT91 UART","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"TeensyUsbSerial","options":{"hidden":true}}},"title":"Teensy3 USB","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"DoubleSpeed":{"enum":[false,true],"options":{"enum_titles":["No","Yes"]},"propertyOrder":0,"type":"boolean"},"_compoundName":{"constantValue":"AvrSerial","options":{"hidden":true}}},"title":"AVR UART","type":"object"}],"propertyOrder":4,"selectKey":"_compoundName","title":"Backend"},"_compoundName":{"constantValue":"serial","options":{"hidden":true}}},"propertyOrder":5,"title":"Serial parameters","type":"object"},"stepper_ports":{"items":{"additionalProperties":false,"headerTemplate":"return vars.self[\"Name\"];","options":{"collapsed":true},"properties":{"DirPin":{"propertyOrder":1,"title":"Direction pin","type":"string"},"EnablePin":{"propertyOrder":3,"title":"Enable pin","type":"string"},"Name":{"propertyOrder":0,"title":"Name","type":"string"},"StepPin":{"propertyOrder":2,"title":"Step pin","type":"string"},"StepperTimer":{"additionalProperties":false,"id":"id_interrupt_timer_choice","options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"interrupt_timer","options":{"hidden":true}},"lalal":{"excludeFromFinalValue":true,"valueTemplate":"return ce_deref(ce_refarr(vars,[\"watch_array\",\"clock\",\"avail_oc_units\"]),\"value\",vars.watch_id);","watch":{"watch_array":"id_board.platform_config.platform","watch_id":"id_interrupt_timer_choice.oc_unit"}},"oc_unit":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"clock\",\"avail_oc_units\"]);","title":"return vars.item[\"value\"];","value":"return vars.item[\"value\"];"},"propertyOrder":0,"title":"Output compare unit","type":"string","watch":{"watch_array":"id_board.platform_config.platform"}}},"propertyOrder":4,"title":"Stepper timer","type":"object"},"_compoundName":{"constantValue":"stepper_port","options":{"hidden":true}}},"title":"Stepper port","type":"object"},"options":{"disable_collapse":true},"propertyOrder":8,"title":"Stepper ports","type":"array"}},"title":"Board","type":"object"},"processingOrder":-2,"propertyOrder":3,"title":"Boards","type":"array"},"configurations":{"items":{"additionalProperties":false,"headerTemplate":"return vars.self[\"name\"];","id":"id_configuration","options":{"collapsed":true},"properties":{"InactiveTime":{"default":480,"propertyOrder":2,"title":"Disable steppers after [s]","type":"number"},"_compoundName":{"constantValue":"config","options":{"hidden":true}},"advanced":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"ForceTimeout":{"default":0.1,"propertyOrder":1,"title":"Force motion timeout [s]","type":"number"},"LedBlinkInterval":{"default":0.5,"propertyOrder":0,"title":"LED blink interval [s]","type":"number"},"_compoundName":{"constantValue":"advanced","options":{"hidden":true}}},"propertyOrder":3,"title":"Advanced parameters","type":"object"},"board":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\"]);","title":"return vars.item[\"name\"];","value":"return vars.item[\"name\"];"},"processingOrder":-1,"propertyOrder":1,"title":"Board","type":"string","watch":{"watch_array":"id_editor.boards"}},"board_data":{"excludeFromFinalValue":true,"valueTemplate":"return ce_deref(ce_refarr(vars,[\"watch_array\"]),\"name\",vars.watch_id);","watch":{"watch_array":"id_editor.boards","watch_id":"id_configuration.board"}},"fans":{"items":{"additionalProperties":false,"headerTemplate":"return vars.self[\"Name\"];","id":"id_configuration_fan","options":{"collapsed":true},"properties":{"Name":{"propertyOrder":0,"title":"Name (single character, e.g. the same as corresponding extruder)","type":"string"},"OffMCommand":{"propertyOrder":3,"title":"Off-command M-number (107 for first fan)","type":"integer"},"SetMCommand":{"propertyOrder":2,"title":"Set-command M-number (106 for first fan)","type":"integer"},"_compoundName":{"constantValue":"fan","options":{"hidden":true}},"pwm_output":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"pwm_outputs\"]);","title":"return vars.item[\"Name\"];","value":"return vars.item[\"Name\"];"},"propertyOrder":1,"title":"PWM output","type":"string","watch":{"watch_array":"id_configuration.board_data"}}},"title":"Fan","type":"object"},"options":{"disable_collapse":true},"propertyOrder":7,"title":"Fans","type":"array"},"heaters":{"items":{"additionalProperties":false,"headerTemplate":"return vars.self[\"Name\"];","id":"id_configuration_heater","options":{"collapsed":true},"properties":{"MaxSafeTemp":{"default":280,"propertyOrder":6,"title":"Turn off if temperature is above [C]","type":"number"},"MinSafeTemp":{"default":15,"propertyOrder":5,"title":"Turn off if temperature is below [C]","type":"number"},"Name":{"propertyOrder":0,"title":"Name (single character, T=extruder, B=bed)","type":"string"},"SetMCommand":{"default":104,"propertyOrder":2,"title":"Set command M-number (extruder 104, bed 140)","type":"integer"},"ThermistorInput":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"analog_inputs\"]);","title":"return vars.item[\"Name\"];","value":"return vars.item[\"Name\"];"},"propertyOrder":4,"title":"Thermistor analog input","type":"string","watch":{"watch_array":"id_configuration.board_data"}},"WaitMCommand":{"default":109,"propertyOrder":3,"title":"Wait command M-number (extruder 109, bed 190)","type":"integer"},"_compoundName":{"constantValue":"heater","options":{"hidden":true}},"control":{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"ControlInterval":{"default":0.2,"propertyOrder":0,"title":"Invoke the PID control algorithm every [s]","type":"number"},"PidD":{"default":0.2,"propertyOrder":3,"title":"Derivative factor [s/K]","type":"number"},"PidDHistory":{"default":0.7,"propertyOrder":6,"title":"Smoothing factor for derivative estimation [1]","type":"number"},"PidI":{"default":0.0005,"propertyOrder":2,"title":"Integral factor [1/(Ks)]","type":"number"},"PidIStateMax":{"default":0.6,"propertyOrder":5,"title":"Upper bound of the integral value [1]","type":"number"},"PidIStateMin":{"default":0.0,"propertyOrder":4,"title":"Lower bound of the integral value [1]","type":"number"},"PidP":{"default":0.05,"propertyOrder":1,"title":"Proportional factor [1/K]","type":"number"},"_compoundName":{"constantValue":"control","options":{"hidden":true}}},"propertyOrder":8,"title":"PID control parameters","type":"object"},"conversion":{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"Beta":{"default":3960,"propertyOrder":2,"title":"Thermistor beta value [K]","type":"number"},"MaxTemp":{"default":300,"propertyOrder":4,"title":"Reliable measurements are below [C]","type":"number"},"MinTemp":{"default":10,"propertyOrder":3,"title":"Reliable measurements are above [C]","type":"number"},"R0":{"default":100000,"propertyOrder":1,"title":"Thermistor resistance @25C [ohm]","type":"number"},"ResistorR":{"default":4700,"propertyOrder":0,"title":"Series-resistor resistance [ohm]","type":"number"},"_compoundName":{"constantValue":"conversion","options":{"hidden":true}}},"propertyOrder":7,"title":"Conversion parameters","type":"object"},"observer":{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"ObserverInterval":{"default":0.5,"propertyOrder":2,"title":"With a measurement taken each [s]","type":"number"},"ObserverMinTime":{"default":3,"propertyOrder":1,"title":"For at least this long [s]","type":"number"},"ObserverTolerance":{"default":3,"propertyOrder":0,"title":"The temperature must be within [K]","type":"number"},"_compoundName":{"constantValue":"observer","options":{"hidden":true}}},"propertyOrder":9,"title":"Temperature-reached semantics","type":"object"},"pwm_output":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"pwm_outputs\"]);","title":"return vars.item[\"Name\"];","value":"return vars.item[\"Name\"];"},"propertyOrder":1,"title":"PWM output","type":"string","watch":{"watch_array":"id_configuration.board_data"}}},"title":"Heater","type":"object"},"options":{"disable_collapse":true},"propertyOrder":6,"title":"Heaters","type":"array"},"name":{"default":"New Configuration","propertyOrder":0,"title":"Configuration name","type":"string"},"probe_config":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"_compoundName":{"constantValue":"ProbeConfig","options":{"hidden":true}},"probe":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"NoProbe","options":{"hidden":true}}},"title":"Disabled","type":"object"},{"additionalProperties":false,"id":"id_configuration_probe_probe","options":{"disable_collapse":true},"properties":{"FastSpeed":{"default":2,"propertyOrder":8,"title":"Fast probing speed [mm/s]","type":"number"},"InvertInput":{"enum":[false,true],"options":{"enum_titles":["No (high signal is pressed)","Yes (low signal is pressed)"]},"propertyOrder":1,"title":"Invert switch input","type":"boolean"},"LowHeight":{"default":2,"propertyOrder":5,"title":"Minimum Z to move down to [mm]","type":"number"},"MoveSpeed":{"default":200,"propertyOrder":7,"title":"Speed for moving to probe points [mm/s]","type":"number"},"OffsetX":{"default":0,"propertyOrder":2,"title":"X-offset of probe from logical position [mm]","type":"number"},"OffsetY":{"default":0,"propertyOrder":3,"title":"Y-offset of probe from logical position [mm]","type":"number"},"ProbePin":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"digital_inputs\"]);","title":"return vars.item[\"Name\"];","value":"return vars.item[\"Name\"];"},"propertyOrder":0,"title":"Probe switch pin","type":"string","watch":{"watch_array":"id_configuration.board_data"}},"ProbePoints":{"format":"table","items":{"additionalProperties":false,"properties":{"X":{"propertyOrder":0,"type":"number"},"Y":{"propertyOrder":1,"type":"number"},"_compoundName":{"constantValue":"ProbePoint","options":{"hidden":true}}},"title":"Point","type":"object"},"options":{"disable_collapse":true},"propertyOrder":11,"title":"Coordinates of probing points","type":"array"},"RetractDist":{"default":1,"propertyOrder":6,"title":"Retraction distance [mm]","type":"number"},"RetractSpeed":{"default":10,"propertyOrder":9,"title":"Retraction speed [mm/s]","type":"number"},"SlowSpeed":{"default":0.5,"propertyOrder":10,"title":"Slow probing speed [mm/s]","type":"number"},"StartHeight":{"default":10,"propertyOrder":4,"title":"Starting Z for probing a point [mm]","type":"number"},"_compoundName":{"constantValue":"Probe","options":{"hidden":true}}},"title":"Enabled","type":"object"}],"propertyOrder":0,"selectKey":"_compoundName","title":"Bed probing"}},"propertyOrder":8,"title":"Bed probing configuration","type":"object"},"steppers":{"items":{"additionalProperties":false,"headerTemplate":"return vars.self[\"Name\"];","id":"id_configuration_stepper","options":{"collapsed":true},"properties":{"CorneringDistance":{"default":40,"propertyOrder":9,"title":"Cornering distance [step]","type":"number"},"DistanceFactor":{"default":1,"propertyOrder":8,"title":"Distance factor [1]","type":"number"},"EnableCartesianSpeedLimit":{"default":true,"enum":[false,true],"options":{"enum_titles":["No","Yes"]},"propertyOrder":10,"title":"Is cartesian (Yes for X/Y/Z, No for extruders)","type":"boolean"},"InvertDir":{"default":false,"enum":[false,true],"options":{"enum_titles":["No (high StepPin is positive motion)","Yes (high StepPin is negative motion)"]},"propertyOrder":2,"title":"Invert direction","type":"boolean"},"MaxAccel":{"default":1500,"propertyOrder":7,"title":"Maximum acceleration [mm/s^2]","type":"number"},"MaxPos":{"default":200,"propertyOrder":5,"title":"Maximum position [mm] (~40000 for extruders)","type":"number"},"MaxSpeed":{"default":300,"propertyOrder":6,"title":"Maximum speed [mm/s]","type":"number"},"MinPos":{"default":0,"propertyOrder":4,"title":"Minimum position [mm] (~-40000 for extruders)","type":"number"},"Name":{"propertyOrder":0,"title":"Name (cartesian X/Y/Z, extruders E/U/V, delta A/B/C)","type":"string"},"StepsPerUnit":{"default":80,"propertyOrder":3,"title":"Steps per unit [1/mm]","type":"number"},"_compoundName":{"constantValue":"stepper","options":{"hidden":true}},"homing":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"no_homing","options":{"hidden":true}}},"title":"Disabled","type":"object"},{"additionalProperties":false,"id":"id_board_steppers_homing","options":{"disable_collapse":true},"properties":{"HomeDir":{"default":false,"enum":[false,true],"options":{"enum_titles":["Negative","Positive"]},"propertyOrder":0,"title":"Homing direction","type":"boolean"},"HomeEndInvert":{"default":false,"enum":[false,true],"options":{"enum_titles":["No (high signal is pressed)","Yes (low signal is pressed)"]},"propertyOrder":2,"title":"Invert endstop","type":"boolean"},"HomeEndstopInput":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"digital_inputs\"]);","title":"return vars.item[\"Name\"];","value":"return vars.item[\"Name\"];"},"propertyOrder":1,"title":"Endstop digital input","type":"string","watch":{"watch_array":"id_configuration.board_data"}},"HomeFastMaxDist":{"default":250,"propertyOrder":3,"title":"Maximum fast travel [mm] (use more than abs(MinPos-MaxPos))","type":"number"},"HomeFastSpeed":{"default":40,"propertyOrder":6,"title":"Fast speed [mm/s]","type":"number"},"HomeRetractDist":{"default":3,"propertyOrder":4,"title":"Retraction travel [mm]","type":"number"},"HomeRetractSpeed":{"default":50,"propertyOrder":7,"title":"Retraction speed [mm/s]","type":"number"},"HomeSlowMaxDist":{"default":5,"propertyOrder":5,"title":"Maximum slow travel [mm] (use more than RetractionTravel)","type":"number"},"HomeSlowSpeed":{"default":5,"propertyOrder":8,"title":"Slow speed [mm/s]","type":"number"},"_compoundName":{"constantValue":"homing","options":{"hidden":true}}},"title":"Enabled","type":"object"}],"propertyOrder":11,"selectKey":"_compoundName","title":"Homing"},"stepper_port":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"stepper_ports\"]);","title":"return vars.item[\"Name\"];","value":"return vars.item[\"Name\"];"},"propertyOrder":1,"title":"Stepper port","type":"string","watch":{"watch_array":"id_configuration.board_data"}}},"title":"Stepper","type":"object"},"options":{"disable_collapse":true},"propertyOrder":4,"title":"Steppers","type":"array"},"transform":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"NoTransform","options":{"hidden":true}}},"title":"None (cartesian)","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"CartesianAxes":{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"VirtualAxis0":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"MaxPos":{"default":200,"propertyOrder":2,"title":"Maximum position [mm]","type":"number"},"MaxSpeed":{"default":300,"propertyOrder":3,"title":"Maximum speed [mm/s]","type":"number"},"MinPos":{"default":0,"propertyOrder":1,"title":"Minimum position [mm]","type":"number"},"Name":{"constantValue":"X","options":{"hidden":true},"propertyOrder":0},"_compoundName":{"constantValue":"VirtualAxisParams","options":{"hidden":true}},"homing":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"no_homing","options":{"hidden":true}}},"title":"Disabled","type":"object"},{"additionalProperties":false,"id":"id_board_steppers_homing","options":{"disable_collapse":true},"properties":{"HomeDir":{"default":false,"enum":[false,true],"options":{"enum_titles":["Negative","Positive"]},"propertyOrder":0,"title":"Homing direction","type":"boolean"},"HomeEndInvert":{"default":false,"enum":[false,true],"options":{"enum_titles":["No (high signal is pressed)","Yes (low signal is pressed)"]},"propertyOrder":2,"title":"Invert endstop","type":"boolean"},"HomeEndstopInput":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"digital_inputs\"]);","title":"return vars.item[\"Name\"];","value":"return vars.item[\"Name\"];"},"propertyOrder":1,"title":"Endstop digital input","type":"string","watch":{"watch_array":"id_configuration.board_data"}},"HomeFastMaxDist":{"default":250,"propertyOrder":3,"title":"Maximum fast travel [mm] (use more than abs(MinPos-MaxPos))","type":"number"},"HomeFastSpeed":{"default":40,"propertyOrder":6,"title":"Fast speed [mm/s]","type":"number"},"HomeRetractDist":{"default":3,"propertyOrder":4,"title":"Retraction travel [mm]","type":"number"},"HomeRetractSpeed":{"default":50,"propertyOrder":7,"title":"Retraction speed [mm/s]","type":"number"},"HomeSlowMaxDist":{"default":5,"propertyOrder":5,"title":"Maximum slow travel [mm] (use more than RetractionTravel)","type":"number"},"HomeSlowSpeed":{"default":5,"propertyOrder":8,"title":"Slow speed [mm/s]","type":"number"},"_compoundName":{"constantValue":"homing","options":{"hidden":true}}},"title":"Enabled","type":"object"}],"propertyOrder":4,"selectKey":"_compoundName","title":"Homing"}},"propertyOrder":0,"title":"Cartesian axis X","type":"object"},"VirtualAxis1":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"MaxPos":{"default":200,"propertyOrder":2,"title":"Maximum position [mm]","type":"number"},"MaxSpeed":{"default":300,"propertyOrder":3,"title":"Maximum speed [mm/s]","type":"number"},"MinPos":{"default":0,"propertyOrder":1,"title":"Minimum position [mm]","type":"number"},"Name":{"constantValue":"Y","options":{"hidden":true},"propertyOrder":0},"_compoundName":{"constantValue":"VirtualAxisParams","options":{"hidden":true}},"homing":{"oneOf":[{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"_compoundName":{"constantValue":"no_homing","options":{"hidden":true}}},"title":"Disabled","type":"object"},{"additionalProperties":false,"id":"id_board_steppers_homing","options":{"disable_collapse":true},"properties":{"HomeDir":{"default":false,"enum":[false,true],"options":{"enum_titles":["Negative","Positive"]},"propertyOrder":0,"title":"Homing direction","type":"boolean"},"HomeEndInvert":{"default":false,"enum":[false,true],"options":{"enum_titles":["No (high signal is pressed)","Yes (low signal is pressed)"]},"propertyOrder":2,"title":"Invert endstop","type":"boolean"},"HomeEndstopInput":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\",\"digital_inputs\"]);","title":"return vars.item[\"Name\"];","value":"return vars.item[\"Name\"];"},"propertyOrder":1,"title":"Endstop digital input","type":"string","watch":{"watch_array":"id_configuration.board_data"}},"HomeFastMaxDist":{"default":250,"propertyOrder":3,"title":"Maximum fast travel [mm] (use more than abs(MinPos-MaxPos))","type":"number"},"HomeFastSpeed":{"default":40,"propertyOrder":6,"title":"Fast speed [mm/s]","type":"number"},"HomeRetractDist":{"default":3,"propertyOrder":4,"title":"Retraction travel [mm]","type":"number"},"HomeRetractSpeed":{"default":50,"propertyOrder":7,"title":"Retraction speed [mm/s]","type":"number"},"HomeSlowMaxDist":{"default":5,"propertyOrder":5,"title":"Maximum slow travel [mm] (use more than RetractionTravel)","type":"number"},"HomeSlowSpeed":{"default":5,"propertyOrder":8,"title":"Slow speed [mm/s]","type":"number"},"_compoundName":{"constantValue":"homing","options":{"hidden":true}}},"title":"Enabled","type":"object"}],"propertyOrder":4,"selectKey":"_compoundName","title":"Homing"}},"propertyOrder":1,"title":"Cartesian axis Y","type":"object"},"_compoundName":{"constantValue":"CartesianAxes","options":{"hidden":true}}},"propertyOrder":3,"title":"Cartesian axes","type":"object"},"DimensionCount":{"constantValue":2,"options":{"hidden":true},"propertyOrder":1},"SegmentsPerSecond":{"constantValue":0,"options":{"hidden":true},"propertyOrder":0},"Steppers":{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"TransformStepper0":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"StepperName":{"default":"A","propertyOrder":0,"title":"Name of stepper to use","type":"string"},"_compoundName":{"constantValue":"TransformStepperParams","options":{"hidden":true}}},"propertyOrder":0,"title":"First stepper","type":"object"},"TransformStepper1":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"StepperName":{"default":"B","propertyOrder":0,"title":"Name of stepper to use","type":"string"},"_compoundName":{"constantValue":"TransformStepperParams","options":{"hidden":true}}},"propertyOrder":1,"title":"Second stepper","type":"object"},"_compoundName":{"constantValue":"Steppers","options":{"hidden":true}}},"propertyOrder":2,"title":"Stepper mapping","type":"object"},"_compoundName":{"constantValue":"CoreXY","options":{"hidden":true}}},"title":"CoreXY/H-bot","type":"object"},{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"CarriageOffset":{"default":19.5,"propertyOrder":3,"title":"Carriage offset [mm]","type":"number"},"CartesianAxes":{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"VirtualAxis0":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"MaxPos":{"default":200,"propertyOrder":2,"title":"Maximum position [mm]","type":"number"},"MaxSpeed":{"default":300,"propertyOrder":3,"title":"Maximum speed [mm/s]","type":"number"},"MinPos":{"default":0,"propertyOrder":1,"title":"Minimum position [mm]","type":"number"},"Name":{"constantValue":"X","options":{"hidden":true},"propertyOrder":0},"_compoundName":{"constantValue":"VirtualAxisParams","options":{"hidden":true}},"homing":{"constantValue":{"_compoundName":"no_homing"},"options":{"hidden":true},"propertyOrder":4}},"propertyOrder":0,"title":"Cartesian axis X","type":"object"},"VirtualAxis1":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"MaxPos":{"default":200,"propertyOrder":2,"title":"Maximum position [mm]","type":"number"},"MaxSpeed":{"default":300,"propertyOrder":3,"title":"Maximum speed [mm/s]","type":"number"},"MinPos":{"default":0,"propertyOrder":1,"title":"Minimum position [mm]","type":"number"},"Name":{"constantValue":"Y","options":{"hidden":true},"propertyOrder":0},"_compoundName":{"constantValue":"VirtualAxisParams","options":{"hidden":true}},"homing":{"constantValue":{"_compoundName":"no_homing"},"options":{"hidden":true},"propertyOrder":4}},"propertyOrder":1,"title":"Cartesian axis Y","type":"object"},"VirtualAxis2":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"MaxPos":{"default":200,"propertyOrder":2,"title":"Maximum position [mm]","type":"number"},"MaxSpeed":{"default":300,"propertyOrder":3,"title":"Maximum speed [mm/s]","type":"number"},"MinPos":{"default":0,"propertyOrder":1,"title":"Minimum position [mm]","type":"number"},"Name":{"constantValue":"Z","options":{"hidden":true},"propertyOrder":0},"_compoundName":{"constantValue":"VirtualAxisParams","options":{"hidden":true}},"homing":{"constantValue":{"_compoundName":"no_homing"},"options":{"hidden":true},"propertyOrder":4}},"propertyOrder":2,"title":"Cartesian axis Z","type":"object"},"_compoundName":{"constantValue":"CartesianAxes","options":{"hidden":true}}},"propertyOrder":9,"title":"Cartesian axes","type":"object"},"DiagnalRod":{"default":214,"propertyOrder":0,"title":"Diagonal rod length [mm]","type":"number"},"DimensionCount":{"constantValue":3,"options":{"hidden":true},"propertyOrder":7},"EffectorOffset":{"default":19.9,"propertyOrder":2,"title":"Effector offset [mm]","type":"number"},"MaxSplitLength":{"default":4.0,"propertyOrder":5,"title":"Maximum segment length for splitting [mm]","type":"number"},"MinSplitLength":{"default":0.1,"propertyOrder":4,"title":"Minimum segment length for splitting [mm]","type":"number"},"SegmentsPerSecond":{"default":100,"propertyOrder":6,"title":"Max segments per second","type":"number"},"SmoothRodOffset":{"default":145,"propertyOrder":1,"title":"Smooth rod offset [mm]","type":"number"},"Steppers":{"additionalProperties":false,"options":{"disable_collapse":true},"properties":{"TransformStepper0":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"StepperName":{"default":"A","propertyOrder":0,"title":"Name of stepper to use","type":"string"},"_compoundName":{"constantValue":"TransformStepperParams","options":{"hidden":true}}},"propertyOrder":0,"title":"Tower-1 stepper (bottom-left)","type":"object"},"TransformStepper1":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"StepperName":{"default":"B","propertyOrder":0,"title":"Name of stepper to use","type":"string"},"_compoundName":{"constantValue":"TransformStepperParams","options":{"hidden":true}}},"propertyOrder":1,"title":"Tower-2 stepper (bottom-right)","type":"object"},"TransformStepper2":{"additionalProperties":false,"options":{"collapsed":true},"properties":{"StepperName":{"default":"C","propertyOrder":0,"title":"Name of stepper to use","type":"string"},"_compoundName":{"constantValue":"TransformStepperParams","options":{"hidden":true}}},"propertyOrder":2,"title":"Tower-3 stepper (top)","type":"object"},"_compoundName":{"constantValue":"Steppers","options":{"hidden":true}}},"propertyOrder":8,"title":"Stepper mapping","type":"object"},"_compoundName":{"constantValue":"Delta","options":{"hidden":true}}},"title":"Delta","type":"object"}],"propertyOrder":5,"selectKey":"_compoundName","title":"Coordinate transformation"}},"title":"Configuration","type":"object"},"processingOrder":-1,"propertyOrder":2,"title":"Configurations","type":"array"},"selected_config":{"enumSource":{"sourceTemplate":"return ce_refarr(vars,[\"watch_array\"]);","title":"return vars.item[\"name\"];","value":"return vars.item[\"name\"];"},"propertyOrder":1,"title":"Selected configuration (to compile)","type":"string","watch":{"watch_array":"id_editor.configurations"}},"version":{"constantValue":1,"options":{"hidden":true},"propertyOrder":0}},"title":"Configuration editor","type":"object"};

// The default configuration.
var default_config = {"_compoundName":"editor","boards":[{"EventChannelTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC0A"},"LedPin":"DuePin37","_compoundName":"board","analog_inputs":[{"Name":"T0","Pin":"DuePinA0","_compoundName":"analog_input"},{"Name":"T1","Pin":"DuePinA1","_compoundName":"analog_input"},{"Name":"T2","Pin":"DuePinA2","_compoundName":"analog_input"},{"Name":"T3","Pin":"DuePinA3","_compoundName":"analog_input"},{"Name":"T4","Pin":"DuePinA4","_compoundName":"analog_input"}],"digital_inputs":[{"InputMode":"At91SamPinInputModePullUp","Name":"X-MIN","Pin":"DuePin28","_compoundName":"digital_input"},{"InputMode":"At91SamPinInputModePullUp","Name":"Y-MIN","Pin":"DuePin30","_compoundName":"digital_input"},{"InputMode":"At91SamPinInputModePullUp","Name":"Z-MIN","Pin":"DuePin32","_compoundName":"digital_input"},{"InputMode":"At91SamPinInputModePullUp","Name":"X-MAX","Pin":"DuePin34","_compoundName":"digital_input"},{"InputMode":"At91SamPinInputModePullUp","Name":"Y-MAX","Pin":"DuePin36","_compoundName":"digital_input"},{"InputMode":"At91SamPinInputModePullUp","Name":"Z-MAX","Pin":"DuePin38","_compoundName":"digital_input"}],"name":"RADDS","performance":{"AxisDriverPrecisionParams":"AxisDriverDuePrecisionParams","EventChannelBufferSize":32,"EventChannelTimerClearance":0.002,"FpType":"double","LookaheadBufferSize":28,"LookaheadCommitCount":10,"MaxStepsPerCycle":0.0017,"StepperSegmentBufferSize":32,"_compoundName":"performance"},"platform_config":{"_compoundName":"PlatformConfig","board_for_build":"arduino_due","board_helper_includes":["arduino_due_pins"],"output_type":"bin","platform":{"_compoundName":"At91Sam3x8e","adc":{"_compoundName":"At91SamAdc","avg_interval":0.0025,"freq":1000000,"settling":3,"smoothing":0.95,"startup":8,"tracking":0,"transfer":1},"clock":{"_compoundName":"At91Sam3xClock","avail_oc_units":[{"value":"TC0A"},{"value":"TC0B"},{"value":"TC0C"},{"value":"TC1A"},{"value":"TC1B"},{"value":"TC1C"},{"value":"TC2A"},{"value":"TC2B"},{"value":"TC2C"},{"value":"TC3A"},{"value":"TC3B"},{"value":"TC3C"},{"value":"TC4A"},{"value":"TC4B"},{"value":"TC4C"},{"value":"TC5A"},{"value":"TC5B"},{"value":"TC5C"},{"value":"TC6A"},{"value":"TC6B"},{"value":"TC6C"},{"value":"TC7A"},{"value":"TC7B"},{"value":"TC7C"},{"value":"TC8A"},{"value":"TC8B"},{"value":"TC8C"}],"prescaler":3,"primary_timer":"TC0"},"pins":{"_compoundName":"At91SamPins","input_modes":[{"ident":"At91SamPinInputModeNormal","name":"Normal"},{"ident":"At91SamPinInputModePullUp","name":"Pull-up"}]},"pwm":{"DivA":0,"DivB":0,"PreA":0,"PreB":0,"_compoundName":"At91Sam3xPwm"},"watchdog":{"Wdv":260,"_compoundName":"At91SamWatchdog"}}},"pwm_outputs":[{"Backend":{"OutputInvert":false,"OutputPin":"DuePin7","PulseInterval":0.3,"Timer":{"_compoundName":"interrupt_timer","lalal":{"value":"TC7A"},"oc_unit":"TC7A"},"_compoundName":"SoftPwm"},"Name":"FET1 (bed)","_compoundName":"pwm_output"},{"Backend":{"OutputInvert":false,"OutputPin":"DuePin13","PulseInterval":0.2,"Timer":{"_compoundName":"interrupt_timer","lalal":{"value":"TC7B"},"oc_unit":"TC7B"},"_compoundName":"SoftPwm"},"Name":"FET6 (extruder 1)","_compoundName":"pwm_output"},{"Backend":{"OutputInvert":false,"OutputPin":"DuePin12","PulseInterval":0.2,"Timer":{"_compoundName":"interrupt_timer","lalal":{"value":"TC7C"},"oc_unit":"TC7C"},"_compoundName":"SoftPwm"},"Name":"FET5 (extruder 2)","_compoundName":"pwm_output"},{"Backend":{"OutputInvert":false,"OutputPin":"DuePin11","PulseInterval":0.2,"Timer":{"_compoundName":"interrupt_timer","lalal":{"value":"TC8A"},"oc_unit":"TC8A"},"_compoundName":"SoftPwm"},"Name":"FET4 (extruder 3)","_compoundName":"pwm_output"},{"Backend":{"OutputInvert":false,"OutputPin":"DuePin9","PulseInterval":0.04,"Timer":{"_compoundName":"interrupt_timer","lalal":{"value":"TC8B"},"oc_unit":"TC8B"},"_compoundName":"SoftPwm"},"Name":"FET3 (fan 1)","_compoundName":"pwm_output"},{"Backend":{"OutputInvert":false,"OutputPin":"DuePin8","PulseInterval":0.04,"Timer":{"_compoundName":"interrupt_timer","lalal":{"value":"TC8C"},"oc_unit":"TC8C"},"_compoundName":"SoftPwm"},"Name":"FET2 (fan 2)","_compoundName":"pwm_output"},{"Backend":{"HardPwmDriver":{"ChannelNumber":4,"ChannelPeriod":1562,"ChannelPrescaler":10,"OutputPin":"DuePin9","Signal":"L","_compoundName":"At91Sam3xPwmChannel"},"_compoundName":"HardPwm"},"Name":"FET3-HardPWM","_compoundName":"pwm_output"},{"Backend":{"HardPwmDriver":{"ChannelNumber":5,"ChannelPeriod":1562,"ChannelPrescaler":10,"OutputPin":"DuePin8","Signal":"L","_compoundName":"At91Sam3xPwmChannel"},"_compoundName":"HardPwm"},"Name":"FET2-HardPWM","_compoundName":"pwm_output"}],"runtime_config":{"_compoundName":"RuntimeConfig","config_manager":{"ConfigStore":{"Eeprom":{"BlockSize":64,"I2c":{"Ckdiv":2,"Device":"At91SamI2cDevice1","I2cFreq":100000,"_compoundName":"At91SamI2c"},"I2cAddr":80,"Size":32768,"WriteTimeout":1,"_compoundName":"I2cEeprom"},"EndBlock":512,"StartBlock":0,"_compoundName":"EepromConfigStore"},"_compoundName":"RuntimeConfigManager"}},"sdcard_config":{"_compoundName":"SdCardConfig","sdcard":{"BufferBaseSize":2048,"GcodeParser":{"MaxParts":8,"_compoundName":"TextGcodeParser"},"MaxCommandSize":256,"SdCardService":{"SpiService":{"Device":"At91Sam3xSpiDevice","_compoundName":"At91SamSpi"},"SsPin":"DuePin4","_compoundName":"SpiSdCard"},"_compoundName":"SdCard"}},"serial":{"BaudRate":115200,"GcodeMaxParts":16,"RecvBufferSizeExp":8,"SendBufferSizeExp":9,"Service":{"_compoundName":"AsfUsbSerial"},"_compoundName":"serial"},"stepper_ports":[{"DirPin":"DuePin23","EnablePin":"DuePin26","Name":"X","StepPin":"DuePin24","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC1A"},"_compoundName":"stepper_port"},{"DirPin":"DuePin16","EnablePin":"DuePin22","Name":"Y","StepPin":"DuePin17","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC2A"},"_compoundName":"stepper_port"},{"DirPin":"DuePin3","EnablePin":"DuePin15","Name":"Z","StepPin":"DuePin2","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC3A"},"_compoundName":"stepper_port"},{"DirPin":"DuePinA6","EnablePin":"DuePinA8","Name":"E1","StepPin":"DuePinA7","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC4A"},"_compoundName":"stepper_port"},{"DirPin":"DuePinA9","EnablePin":"DuePinA11","Name":"E2","StepPin":"DuePinA10","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC5A"},"_compoundName":"stepper_port"},{"DirPin":"DuePin53","EnablePin":"DuePin49","Name":"E3","StepPin":"DuePin51","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC6A"},"_compoundName":"stepper_port"}]},{"EventChannelTimer":{"_compoundName":"interrupt_timer","oc_unit":"FTM0_0"},"LedPin":"TeensyPin13","_compoundName":"board","analog_inputs":[{"Name":"T","Pin":"TeensyPinA2","_compoundName":"analog_input"}],"digital_inputs":[{"InputMode":"Mk20PinInputModePullUp","Name":"X-min","Pin":"TeensyPin12","_compoundName":"digital_input"},{"InputMode":"Mk20PinInputModePullUp","Name":"Y-min","Pin":"TeensyPin14","_compoundName":"digital_input"},{"InputMode":"Mk20PinInputModePullUp","Name":"Z-min","Pin":"TeensyPin15","_compoundName":"digital_input"}],"name":"Teensy 3","performance":{"AxisDriverPrecisionParams":"AxisDriverDuePrecisionParams","EventChannelBufferSize":32,"EventChannelTimerClearance":0.002,"FpType":"float","LookaheadBufferSize":28,"LookaheadCommitCount":10,"MaxStepsPerCycle":0.0017,"StepperSegmentBufferSize":32,"_compoundName":"performance"},"platform_config":{"_compoundName":"PlatformConfig","board_for_build":"teensy3","board_helper_includes":["teensy3_pins"],"output_type":"hex","platform":{"_compoundName":"Teensy3","adc":{"AdcADiv":3,"_compoundName":"Mk20Adc"},"clock":{"_compoundName":"Mk20Clock","avail_oc_units":[{"value":"FTM0_0"},{"value":"FTM0_1"},{"value":"FTM0_2"},{"value":"FTM0_3"},{"value":"FTM0_4"},{"value":"FTM0_5"},{"value":"FTM0_6"},{"value":"FTM0_7"},{"value":"FTM1_0"},{"value":"FTM1_1"}],"prescaler":4,"primary_timer":"FTM0"},"pins":{"_compoundName":"Mk20Pins","input_modes":[{"ident":"Mk20PinInputModeNormal","name":"Normal"},{"ident":"Mk20PinInputModePullUp","name":"Pull-up"},{"ident":"Mk20PinInputModePullDown","name":"Pull-down"}]},"watchdog":{"Prescval":0,"Toval":2000,"_compoundName":"Mk20Watchdog"}}},"pwm_outputs":[{"Backend":{"OutputInvert":false,"OutputPin":"TeensyPin17","PulseInterval":0.2,"Timer":{"_compoundName":"interrupt_timer","lalal":{"value":"FTM0_5"},"oc_unit":"FTM0_5"},"_compoundName":"SoftPwm"},"Name":"Extruder","_compoundName":"pwm_output"},{"Backend":{"OutputInvert":false,"OutputPin":"TeensyPin18","PulseInterval":0.04,"Timer":{"_compoundName":"interrupt_timer","lalal":{"value":"FTM0_6"},"oc_unit":"FTM0_6"},"_compoundName":"SoftPwm"},"Name":"Fan","_compoundName":"pwm_output"}],"runtime_config":{"_compoundName":"RuntimeConfig","config_manager":{"ConfigStore":{"Eeprom":{"FakeBlockSize":16,"Size":2048,"_compoundName":"TeensyEeprom"},"EndBlock":128,"StartBlock":0,"_compoundName":"EepromConfigStore"},"_compoundName":"RuntimeConfigManager"}},"sdcard_config":{"_compoundName":"SdCardConfig","sdcard":{"_compoundName":"NoSdCard"}},"serial":{"BaudRate":0,"GcodeMaxParts":16,"RecvBufferSizeExp":8,"SendBufferSizeExp":8,"Service":{"_compoundName":"TeensyUsbSerial"},"_compoundName":"serial"},"stepper_ports":[{"DirPin":"TeensyPin1","EnablePin":"TeensyPin8","Name":"X","StepPin":"TeensyPin0","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"FTM0_1"},"_compoundName":"stepper_port"},{"DirPin":"TeensyPin3","EnablePin":"TeensyPin9","Name":"Y","StepPin":"TeensyPin2","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"FTM0_2"},"_compoundName":"stepper_port"},{"DirPin":"TeensyPin5","EnablePin":"TeensyPin10","Name":"Z","StepPin":"TeensyPin4","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"FTM0_3"},"_compoundName":"stepper_port"},{"DirPin":"TeensyPin7","EnablePin":"TeensyPin11","Name":"E","StepPin":"TeensyPin6","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"FTM0_4"},"_compoundName":"stepper_port"}]},{"EventChannelTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC5_C"},"LedPin":"MegaPin13","_compoundName":"board","analog_inputs":[{"Name":"T0","Pin":"MegaPinA13","_compoundName":"analog_input"},{"Name":"T1","Pin":"MegaPinA14","_compoundName":"analog_input"},{"Name":"T2","Pin":"MegaPinA15","_compoundName":"analog_input"}],"digital_inputs":[{"InputMode":"AvrPinInputModePullUp","Name":"X-","Pin":"MegaPin3","_compoundName":"digital_input"},{"InputMode":"AvrPinInputModePullUp","Name":"X+","Pin":"MegaPin2","_compoundName":"digital_input"},{"InputMode":"AvrPinInputModePullUp","Name":"Y-","Pin":"MegaPin14","_compoundName":"digital_input"},{"InputMode":"AvrPinInputModePullUp","Name":"Y+","Pin":"MegaPin15","_compoundName":"digital_input"},{"InputMode":"AvrPinInputModePullUp","Name":"Z-","Pin":"MegaPin18","_compoundName":"digital_input"},{"InputMode":"AvrPinInputModePullUp","Name":"Z+","Pin":"MegaPin19","_compoundName":"digital_input"}],"name":"RAMPS 1.3","performance":{"AxisDriverPrecisionParams":"AxisDriverAvrPrecisionParams","EventChannelBufferSize":24,"EventChannelTimerClearance":0.002,"FpType":"double","LookaheadBufferSize":10,"LookaheadCommitCount":5,"MaxStepsPerCycle":0.00137,"StepperSegmentBufferSize":24,"_compoundName":"performance"},"platform_config":{"_compoundName":"PlatformConfig","board_for_build":"ramps13","board_helper_includes":["arduino_mega_pins"],"output_type":"hex","platform":{"_compoundName":"AVR ATmega2560","adc":{"Prescaler":7,"RefSel":1,"_compoundName":"AvrAdc"},"clock":{"PrescaleDivide":64,"_compoundName":"AvrClock","avail_oc_units":[{"value":"TC0_A"},{"value":"TC0_B"},{"value":"TC1_A"},{"value":"TC1_B"},{"value":"TC1_C"},{"value":"TC2_A"},{"value":"TC2_B"},{"value":"TC3_A"},{"value":"TC3_B"},{"value":"TC3_C"},{"value":"TC4_A"},{"value":"TC4_B"},{"value":"TC4_C"},{"value":"TC5_A"},{"value":"TC5_B"},{"value":"TC5_C"}],"primary_timer":"TC3","timers":[{"Mode":{"PrescaleDivide":1024,"_compoundName":"AvrClockTcMode8BitPwm"},"Timer":"TC0","_compoundName":"Timer"},{"Mode":{"PrescaleDivide":1024,"_compoundName":"AvrClockTcMode8BitPwm"},"Timer":"TC2","_compoundName":"Timer"},{"Mode":{"PrescaleDivide":64,"TopVal":4095,"_compoundName":"AvrClockTcMode16BitPwm"},"Timer":"TC1","_compoundName":"Timer"}]},"pins":{"_compoundName":"AvrPins","input_modes":[{"ident":"AvrPinInputModeNormal","name":"Normal"},{"ident":"AvrPinInputModePullUp","name":"Pull-up"}]},"watchdog":{"Timeout":"WDTO_2S","_compoundName":"AvrWatchdog"}}},"pwm_outputs":[{"Backend":{"OutputInvert":false,"OutputPin":"MegaPin8","PulseInterval":0.3,"Timer":{"_compoundName":"interrupt_timer","lalal":{"value":"TC5_A"},"oc_unit":"TC5_A"},"_compoundName":"SoftPwm"},"Name":"D8 (bed)","_compoundName":"pwm_output"},{"Backend":{"HardPwmDriver":{"OutputPin":"MegaPin9","_compoundName":"AvrClockPwm","lalal":{"value":"TC2_B"},"oc_unit":"TC2_B"},"_compoundName":"HardPwm"},"Name":"D9 (extrider 2)","_compoundName":"pwm_output"},{"Backend":{"HardPwmDriver":{"OutputPin":"MegaPin10","_compoundName":"AvrClockPwm","lalal":{"value":"TC2_A"},"oc_unit":"TC2_A"},"_compoundName":"HardPwm"},"Name":"D10 (extruder 1)","_compoundName":"pwm_output"},{"Backend":{"HardPwmDriver":{"OutputPin":"MegaPin4","_compoundName":"AvrClockPwm","lalal":{"value":"TC0_B"},"oc_unit":"TC0_B"},"_compoundName":"HardPwm"},"Name":"D4","_compoundName":"pwm_output"},{"Backend":{"HardPwmDriver":{"OutputPin":"MegaPin11","_compoundName":"AvrClockPwm","lalal":{"value":"TC1_A"},"oc_unit":"TC1_A"},"_compoundName":"HardPwm"},"Name":"D11","_compoundName":"pwm_output"}],"runtime_config":{"_compoundName":"RuntimeConfig","config_manager":{"ConfigStore":{"Eeprom":{"FakeBlockSize":16,"_compoundName":"AvrEeprom"},"EndBlock":256,"StartBlock":0,"_compoundName":"EepromConfigStore"},"_compoundName":"RuntimeConfigManager"}},"sdcard_config":{"_compoundName":"SdCardConfig","sdcard":{"BufferBaseSize":1024,"GcodeParser":{"MaxParts":8,"_compoundName":"TextGcodeParser"},"MaxCommandSize":100,"SdCardService":{"SpiService":{"SpeedDiv":32,"_compoundName":"AvrSpi"},"SsPin":"AvrPin<AvrPortB,0>","_compoundName":"SpiSdCard"},"_compoundName":"SdCard"}},"serial":{"BaudRate":250000,"GcodeMaxParts":8,"RecvBufferSizeExp":7,"SendBufferSizeExp":6,"Service":{"DoubleSpeed":true,"_compoundName":"AvrSerial"},"_compoundName":"serial"},"stepper_ports":[{"DirPin":"MegaPin55","EnablePin":"MegaPin38","Name":"X","StepPin":"MegaPin54","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC3_A"},"_compoundName":"stepper_port"},{"DirPin":"MegaPin61","EnablePin":"MegaPin56","Name":"Y","StepPin":"MegaPin60","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC3_B"},"_compoundName":"stepper_port"},{"DirPin":"MegaPin48","EnablePin":"MegaPin62","Name":"Z","StepPin":"MegaPin46","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC3_C"},"_compoundName":"stepper_port"},{"DirPin":"MegaPin28","EnablePin":"MegaPin24","Name":"E0","StepPin":"MegaPin26","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC4_A"},"_compoundName":"stepper_port"},{"DirPin":"MegaPin34","EnablePin":"MegaPin30","Name":"E1","StepPin":"MegaPin36","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC4_B"},"_compoundName":"stepper_port"}]},{"EventChannelTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC2_A"},"LedPin":"AvrPin<AvrPortA,4>","_compoundName":"board","analog_inputs":[{"Name":"btemp","Pin":"AvrPin<AvrPortA,6>","_compoundName":"analog_input"},{"Name":"etemp","Pin":"AvrPin<AvrPortA,7>","_compoundName":"analog_input"}],"digital_inputs":[{"InputMode":"AvrPinInputModePullUp","Name":"X-stop","Pin":"AvrPin<AvrPortC,2>","_compoundName":"digital_input"},{"InputMode":"AvrPinInputModePullUp","Name":"Y-stop","Pin":"AvrPin<AvrPortC,3>","_compoundName":"digital_input"},{"InputMode":"AvrPinInputModePullUp","Name":"Z-stop","Pin":"AvrPin<AvrPortC,4>","_compoundName":"digital_input"}],"name":"Melzi","performance":{"AxisDriverPrecisionParams":"AxisDriverAvrPrecisionParams","EventChannelBufferSize":32,"EventChannelTimerClearance":0.002,"FpType":"double","LookaheadBufferSize":16,"LookaheadCommitCount":8,"MaxStepsPerCycle":0.00137,"StepperSegmentBufferSize":32,"_compoundName":"performance"},"platform_config":{"_compoundName":"PlatformConfig","board_for_build":"melzi","board_helper_includes":[],"output_type":"hex","platform":{"_compoundName":"AVR ATmega1284p","adc":{"Prescaler":7,"RefSel":1,"_compoundName":"AvrAdc"},"clock":{"PrescaleDivide":64,"_compoundName":"AvrClock","avail_oc_units":[{"value":"TC0_A"},{"value":"TC0_B"},{"value":"TC1_A"},{"value":"TC1_B"},{"value":"TC2_A"},{"value":"TC2_B"},{"value":"TC3_A"},{"value":"TC3_B"}],"primary_timer":"TC3","timers":[{"Mode":{"PrescaleDivide":64,"TopVal":4095,"_compoundName":"AvrClockTcMode16BitPwm"},"Timer":"TC1","_compoundName":"Timer"}]},"pins":{"_compoundName":"AvrPins","input_modes":[{"ident":"AvrPinInputModeNormal","name":"Normal"},{"ident":"AvrPinInputModePullUp","name":"Pull-up"}]},"watchdog":{"Timeout":"WDTO_2S","_compoundName":"AvrWatchdog"}}},"pwm_outputs":[{"Backend":{"OutputInvert":false,"OutputPin":"AvrPin<AvrPortB,4>","PulseInterval":0.04,"Timer":{"_compoundName":"interrupt_timer","lalal":{"value":"TC2_B"},"oc_unit":"TC2_B"},"_compoundName":"SoftPwm"},"Name":"fan","_compoundName":"pwm_output"},{"Backend":{"HardPwmDriver":{"OutputPin":"AvrPin<AvrPortD,4>","_compoundName":"AvrClockPwm","lalal":{"value":"TC1_B"},"oc_unit":"TC1_B"},"_compoundName":"HardPwm"},"Name":"bed","_compoundName":"pwm_output"},{"Backend":{"HardPwmDriver":{"OutputPin":"AvrPin<AvrPortD,5>","_compoundName":"AvrClockPwm","lalal":{"value":"TC1_A"},"oc_unit":"TC1_A"},"_compoundName":"HardPwm"},"Name":"hot end","_compoundName":"pwm_output"}],"runtime_config":{"_compoundName":"RuntimeConfig","config_manager":{"ConfigStore":{"Eeprom":{"FakeBlockSize":16,"_compoundName":"AvrEeprom"},"EndBlock":256,"StartBlock":0,"_compoundName":"EepromConfigStore"},"_compoundName":"RuntimeConfigManager"}},"sdcard_config":{"_compoundName":"SdCardConfig","sdcard":{"BufferBaseSize":2048,"GcodeParser":{"MaxParts":8,"_compoundName":"TextGcodeParser"},"MaxCommandSize":100,"SdCardService":{"SpiService":{"SpeedDiv":32,"_compoundName":"AvrSpi"},"SsPin":"AvrPin<AvrPortA,0>","_compoundName":"SpiSdCard"},"_compoundName":"SdCard"}},"serial":{"BaudRate":115200,"GcodeMaxParts":8,"RecvBufferSizeExp":7,"SendBufferSizeExp":8,"Service":{"DoubleSpeed":true,"_compoundName":"AvrSerial"},"_compoundName":"serial"},"stepper_ports":[{"DirPin":"AvrPin<AvrPortC,5>","EnablePin":"AvrPin<AvrPortD,6>","Name":"X","StepPin":"AvrPin<AvrPortD,7>","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC0_A"},"_compoundName":"stepper_port"},{"DirPin":"AvrPin<AvrPortC,7>","EnablePin":"AvrPin<AvrPortD,6>","Name":"Y","StepPin":"AvrPin<AvrPortC,6>","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC0_B"},"_compoundName":"stepper_port"},{"DirPin":"AvrPin<AvrPortB,2>","EnablePin":"AvrPin<AvrPortA,5>","Name":"Z","StepPin":"AvrPin<AvrPortB,3>","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC3_A"},"_compoundName":"stepper_port"},{"DirPin":"AvrPin<AvrPortB,0>","EnablePin":"AvrPin<AvrPortD,6>","Name":"E","StepPin":"AvrPin<AvrPortB,1>","StepperTimer":{"_compoundName":"interrupt_timer","oc_unit":"TC3_B"},"_compoundName":"stepper_port"}]}],"configurations":[{"InactiveTime":480,"_compoundName":"config","advanced":{"ForceTimeout":0.1,"LedBlinkInterval":0.5,"_compoundName":"advanced"},"board":"RADDS","fans":[{"Name":"E","OffMCommand":107,"SetMCommand":106,"_compoundName":"fan","pwm_output":"FET3 (fan 1)"},{"Name":"U","OffMCommand":407,"SetMCommand":406,"_compoundName":"fan","pwm_output":"FET2 (fan 2)"}],"heaters":[{"MaxSafeTemp":280,"MinSafeTemp":15,"Name":"T","SetMCommand":104,"ThermistorInput":"T0","WaitMCommand":109,"_compoundName":"heater","control":{"ControlInterval":0.2,"PidD":0.17,"PidDHistory":0.7,"PidI":0.0006,"PidIStateMax":0.6,"PidIStateMin":0,"PidP":0.047,"_compoundName":"control"},"conversion":{"Beta":3960,"MaxTemp":300,"MinTemp":10,"R0":100000,"ResistorR":4700,"_compoundName":"conversion"},"observer":{"ObserverInterval":0.5,"ObserverMinTime":3,"ObserverTolerance":3,"_compoundName":"observer"},"pwm_output":"FET6 (extruder 1)"},{"MaxSafeTemp":120,"MinSafeTemp":15,"Name":"B","SetMCommand":140,"ThermistorInput":"T4","WaitMCommand":190,"_compoundName":"heater","control":{"ControlInterval":0.3,"PidD":2.5,"PidDHistory":0.8,"PidI":0.012,"PidIStateMax":1,"PidIStateMin":0,"PidP":1,"_compoundName":"control"},"conversion":{"Beta":3480,"MaxTemp":150,"MinTemp":10,"R0":10000,"ResistorR":4700,"_compoundName":"conversion"},"observer":{"ObserverInterval":0.5,"ObserverMinTime":3,"ObserverTolerance":1.5,"_compoundName":"observer"},"pwm_output":"FET1 (bed)"},{"MaxSafeTemp":280,"MinSafeTemp":15,"Name":"U","SetMCommand":404,"ThermistorInput":"T1","WaitMCommand":409,"_compoundName":"heater","control":{"ControlInterval":0.2,"PidD":0.17,"PidDHistory":0.7,"PidI":0.0006,"PidIStateMax":0.6,"PidIStateMin":0,"PidP":0.047,"_compoundName":"control"},"conversion":{"Beta":3960,"MaxTemp":300,"MinTemp":10,"R0":100000,"ResistorR":4700,"_compoundName":"conversion"},"observer":{"ObserverInterval":0.5,"ObserverMinTime":5,"ObserverTolerance":5,"_compoundName":"observer"},"pwm_output":"FET5 (extruder 2)"}],"name":"RADDS example","probe_config":{"_compoundName":"ProbeConfig","probe":{"FastSpeed":2,"InvertInput":false,"LowHeight":2,"MoveSpeed":120,"OffsetX":-18,"OffsetY":-31,"ProbePin":"Z-MAX","ProbePoints":[{"X":0,"Y":31,"_compoundName":"ProbePoint"},{"X":0,"Y":155,"_compoundName":"ProbePoint"},{"X":205,"Y":31,"_compoundName":"ProbePoint"},{"X":205,"Y":155,"_compoundName":"ProbePoint"}],"RetractDist":1,"RetractSpeed":3,"SlowSpeed":0.6,"StartHeight":9,"_compoundName":"Probe"}},"steppers":[{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":false,"MaxAccel":1500,"MaxPos":210,"MaxSpeed":300,"MinPos":-53,"Name":"X","StepsPerUnit":160,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"X-MIN","HomeFastMaxDist":280,"HomeFastSpeed":40,"HomeRetractDist":3,"HomeRetractSpeed":50,"HomeSlowMaxDist":5,"HomeSlowSpeed":5,"_compoundName":"homing"},"stepper_port":"X"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":false,"MaxAccel":650,"MaxPos":157,"MaxSpeed":300,"MinPos":0,"Name":"Y","StepsPerUnit":160,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"Y-MIN","HomeFastMaxDist":200,"HomeFastSpeed":40,"HomeRetractDist":3,"HomeRetractSpeed":50,"HomeSlowMaxDist":5,"HomeSlowSpeed":5,"_compoundName":"homing"},"stepper_port":"Y"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":true,"MaxAccel":30,"MaxPos":100,"MaxSpeed":3,"MinPos":0,"Name":"Z","StepsPerUnit":8000,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"Z-MIN","HomeFastMaxDist":101,"HomeFastSpeed":2,"HomeRetractDist":0.8,"HomeRetractSpeed":2,"HomeSlowMaxDist":1.2,"HomeSlowSpeed":0.6,"_compoundName":"homing"},"stepper_port":"Z"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":false,"InvertDir":false,"MaxAccel":250,"MaxPos":40000,"MaxSpeed":45,"MinPos":-40000,"Name":"E","StepsPerUnit":1856,"_compoundName":"stepper","homing":{"_compoundName":"no_homing"},"stepper_port":"E1"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":false,"InvertDir":false,"MaxAccel":250,"MaxPos":40000,"MaxSpeed":45,"MinPos":-40000,"Name":"U","StepsPerUnit":1320,"_compoundName":"stepper","homing":{"_compoundName":"no_homing"},"stepper_port":"E2"}],"transform":{"_compoundName":"NoTransform"}},{"InactiveTime":480,"_compoundName":"config","advanced":{"ForceTimeout":0.1,"LedBlinkInterval":0.5,"_compoundName":"advanced"},"board":"Teensy 3","fans":[{"Name":"E","OffMCommand":107,"SetMCommand":106,"_compoundName":"fan","pwm_output":"Fan"}],"heaters":[{"MaxSafeTemp":280,"MinSafeTemp":15,"Name":"T","SetMCommand":104,"ThermistorInput":"T","WaitMCommand":109,"_compoundName":"heater","control":{"ControlInterval":0.2,"PidD":0.17,"PidDHistory":0.7,"PidI":0.0006,"PidIStateMax":0.6,"PidIStateMin":0,"PidP":0.047,"_compoundName":"control"},"conversion":{"Beta":3960,"MaxTemp":300,"MinTemp":10,"R0":100000,"ResistorR":4700,"_compoundName":"conversion"},"observer":{"ObserverInterval":0.5,"ObserverMinTime":3,"ObserverTolerance":3,"_compoundName":"observer"},"pwm_output":"Extruder"}],"name":"Teensy 3 example","probe_config":{"_compoundName":"ProbeConfig","probe":{"_compoundName":"NoProbe"}},"steppers":[{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":false,"MaxAccel":1500,"MaxPos":200,"MaxSpeed":300,"MinPos":0,"Name":"X","StepsPerUnit":160,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"X-min","HomeFastMaxDist":5,"HomeFastSpeed":50,"HomeRetractDist":3,"HomeRetractSpeed":50,"HomeSlowMaxDist":5,"HomeSlowSpeed":5,"_compoundName":"homing"},"stepper_port":"X"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":false,"MaxAccel":1500,"MaxPos":200,"MaxSpeed":300,"MinPos":0,"Name":"Y","StepsPerUnit":160,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"Y-min","HomeFastMaxDist":5,"HomeFastSpeed":50,"HomeRetractDist":3,"HomeRetractSpeed":50,"HomeSlowMaxDist":5,"HomeSlowSpeed":5,"_compoundName":"homing"},"stepper_port":"Y"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":false,"MaxAccel":30,"MaxPos":100,"MaxSpeed":3,"MinPos":0,"Name":"Z","StepsPerUnit":8000,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"Z-min","HomeFastMaxDist":101,"HomeFastSpeed":2,"HomeRetractDist":1,"HomeRetractSpeed":2,"HomeSlowMaxDist":1.5,"HomeSlowSpeed":0.5,"_compoundName":"homing"},"stepper_port":"Z"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":false,"InvertDir":false,"MaxAccel":250,"MaxPos":40000,"MaxSpeed":40,"MinPos":-40000,"Name":"E","StepsPerUnit":1856,"_compoundName":"stepper","homing":{"_compoundName":"no_homing"},"stepper_port":"E"}],"transform":{"_compoundName":"NoTransform"}},{"InactiveTime":480,"_compoundName":"config","advanced":{"ForceTimeout":0.1,"LedBlinkInterval":0.5,"_compoundName":"advanced"},"board":"RAMPS 1.3","fans":[{"Name":"E","OffMCommand":107,"SetMCommand":106,"_compoundName":"fan","pwm_output":"D4"}],"heaters":[{"MaxSafeTemp":120,"MinSafeTemp":15,"Name":"B","SetMCommand":140,"ThermistorInput":"T1","WaitMCommand":190,"_compoundName":"heater","control":{"ControlInterval":0.3,"PidD":2.5,"PidDHistory":0.8,"PidI":0.012,"PidIStateMax":1,"PidIStateMin":0,"PidP":1,"_compoundName":"control"},"conversion":{"Beta":3480,"MaxTemp":150,"MinTemp":10,"R0":10000,"ResistorR":4700,"_compoundName":"conversion"},"observer":{"ObserverInterval":0.5,"ObserverMinTime":3,"ObserverTolerance":1.5,"_compoundName":"observer"},"pwm_output":"D8 (bed)"},{"MaxSafeTemp":280,"MinSafeTemp":15,"Name":"T","SetMCommand":104,"ThermistorInput":"T0","WaitMCommand":109,"_compoundName":"heater","control":{"ControlInterval":0.2,"PidD":0.17,"PidDHistory":0.7,"PidI":0.0006,"PidIStateMax":0.6,"PidIStateMin":0,"PidP":0.047,"_compoundName":"control"},"conversion":{"Beta":3960,"MaxTemp":300,"MinTemp":10,"R0":100000,"ResistorR":4700,"_compoundName":"conversion"},"observer":{"ObserverInterval":0.5,"ObserverMinTime":3,"ObserverTolerance":3,"_compoundName":"observer"},"pwm_output":"D10 (extruder 1)"}],"name":"RAMPS 1.3 example","probe_config":{"_compoundName":"ProbeConfig","probe":{"_compoundName":"NoProbe"}},"steppers":[{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":false,"MaxAccel":1500,"MaxPos":210,"MaxSpeed":300,"MinPos":-53,"Name":"X","StepsPerUnit":160,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"X-","HomeFastMaxDist":200,"HomeFastSpeed":40,"HomeRetractDist":3,"HomeRetractSpeed":50,"HomeSlowMaxDist":5,"HomeSlowSpeed":5,"_compoundName":"homing"},"stepper_port":"X"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":false,"MaxAccel":650,"MaxPos":155,"MaxSpeed":300,"MinPos":0,"Name":"Y","StepsPerUnit":160,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"Y-","HomeFastMaxDist":200,"HomeFastSpeed":40,"HomeRetractDist":3,"HomeRetractSpeed":50,"HomeSlowMaxDist":5,"HomeSlowSpeed":5,"_compoundName":"homing"},"stepper_port":"Y"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":false,"MaxAccel":30,"MaxPos":100,"MaxSpeed":3,"MinPos":0,"Name":"Z","StepsPerUnit":4000,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"Z-","HomeFastMaxDist":101,"HomeFastSpeed":2,"HomeRetractDist":0.8,"HomeRetractSpeed":2,"HomeSlowMaxDist":1.2,"HomeSlowSpeed":0.6,"_compoundName":"homing"},"stepper_port":"Z"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":false,"InvertDir":false,"MaxAccel":250,"MaxPos":40000,"MaxSpeed":45,"MinPos":-40000,"Name":"E","StepsPerUnit":928,"_compoundName":"stepper","homing":{"_compoundName":"no_homing"},"stepper_port":"E0"}],"transform":{"_compoundName":"NoTransform"}},{"InactiveTime":480,"_compoundName":"config","advanced":{"ForceTimeout":0.1,"LedBlinkInterval":0.5,"_compoundName":"advanced"},"board":"Melzi","fans":[{"Name":"E","OffMCommand":107,"SetMCommand":106,"_compoundName":"fan","pwm_output":"fan"}],"heaters":[{"MaxSafeTemp":280,"MinSafeTemp":15,"Name":"T","SetMCommand":104,"ThermistorInput":"etemp","WaitMCommand":109,"_compoundName":"heater","control":{"ControlInterval":0.2,"PidD":0.17,"PidDHistory":0.7,"PidI":0.0006,"PidIStateMax":0.6,"PidIStateMin":0,"PidP":0.047,"_compoundName":"control"},"conversion":{"Beta":3960,"MaxTemp":300,"MinTemp":10,"R0":100000,"ResistorR":4700,"_compoundName":"conversion"},"observer":{"ObserverInterval":0.5,"ObserverMinTime":3,"ObserverTolerance":3,"_compoundName":"observer"},"pwm_output":"hot end"},{"MaxSafeTemp":120,"MinSafeTemp":15,"Name":"B","SetMCommand":140,"ThermistorInput":"btemp","WaitMCommand":190,"_compoundName":"heater","control":{"ControlInterval":0.2,"PidD":2.5,"PidDHistory":0.7,"PidI":0.012,"PidIStateMax":1,"PidIStateMin":0,"PidP":1,"_compoundName":"control"},"conversion":{"Beta":3480,"MaxTemp":150,"MinTemp":10,"R0":10000,"ResistorR":4700,"_compoundName":"conversion"},"observer":{"ObserverInterval":0.5,"ObserverMinTime":3,"ObserverTolerance":1.5,"_compoundName":"observer"},"pwm_output":"bed"}],"name":"Melzi example","probe_config":{"_compoundName":"ProbeConfig","probe":{"_compoundName":"NoProbe"}},"steppers":[{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":false,"MaxAccel":1500,"MaxPos":200,"MaxSpeed":300,"MinPos":0,"Name":"X","StepsPerUnit":80,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"X-stop","HomeFastMaxDist":200,"HomeFastSpeed":40,"HomeRetractDist":3,"HomeRetractSpeed":50,"HomeSlowMaxDist":5,"HomeSlowSpeed":5,"_compoundName":"homing"},"stepper_port":"X"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":false,"MaxAccel":1500,"MaxPos":200,"MaxSpeed":300,"MinPos":0,"Name":"Y","StepsPerUnit":80,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"Y-stop","HomeFastMaxDist":200,"HomeFastSpeed":40,"HomeRetractDist":3,"HomeRetractSpeed":50,"HomeSlowMaxDist":5,"HomeSlowSpeed":5,"_compoundName":"homing"},"stepper_port":"Y"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":true,"InvertDir":false,"MaxAccel":30,"MaxPos":100,"MaxSpeed":3,"MinPos":0,"Name":"Z","StepsPerUnit":4000,"_compoundName":"stepper","homing":{"HomeDir":false,"HomeEndInvert":false,"HomeEndstopInput":"Z-stop","HomeFastMaxDist":101,"HomeFastSpeed":2,"HomeRetractDist":0.8,"HomeRetractSpeed":2,"HomeSlowMaxDist":1.2,"HomeSlowSpeed":0.6,"_compoundName":"homing"},"stepper_port":"Z"},{"CorneringDistance":40,"DistanceFactor":1,"EnableCartesianSpeedLimit":false,"InvertDir":false,"MaxAccel":250,"MaxPos":40000,"MaxSpeed":45,"MinPos":-40000,"Name":"E","StepsPerUnit":928,"_compoundName":"stepper","homing":{"_compoundName":"no_homing"},"stepper_port":"E"}],"transform":{"_compoundName":"NoTransform"}}],"selected_config":"RADDS example","version":1};

// Divs/textareas on the page
var $editor = document.getElementById('editor');

// Buttons and other stuff
var $save_data_button = document.getElementById('save_data');
var $reload_data_button = document.getElementById('reload_data');
var $delete_saved_data_button = document.getElementById('delete_saved_data');
var $load_defaults_button = document.getElementById('load_defaults');
var $export_data_button = document.getElementById('export_data');
var $import_data_button = document.getElementById('import_data');
var $import_data_file_input = document.getElementById('import_data_file');
var $compile_start_button = document.getElementById('compile_start');

// Global variables.
var jsoneditor;

function ce_refarr(obj, attrs) {
    var len = attrs.length;
    for (var i = 0; i < len; i++) {
        obj = obj[attrs[i]];
        if (obj === null || typeof obj !== 'object') {
            return [];
        }
    }
    return obj;
}

function ce_deref(target_arr, target_id_field, target_id) {
    for (var index in target_arr) {
        var target = target_arr[index];
        if (target[target_id_field] == target_id) {
            return target;
        }
    }
    return null;
}

// Function to get config from local storage or default.
function get_config(allow_default) {
    var config_json = localStorage.getItem("aprinter_config");
    if (!config_json) {
        if (allow_default) {
            return {ok: true, value: default_config};
        }
        return {ok: false};
    }
    var config_value = JSON.parse(config_json);
    return {ok: true, value: config_value};
}

function set_compile_status(running) {
    $compile_start_button.disabled = running;
    
    var elems = document.getElementsByClassName("compile_progress");
    for (var i = 0; i < elems.length; i++) {
        elems[i].style.visibility = running ? "visible" : "hidden";
    }
}

function get_string_value() {
    return JSON.stringify(jsoneditor.getValue());
}

function get_pretty_string_value() {
    return JSON.stringify(jsoneditor.getValue(), undefined, 2);
}

function base64_to_blob(input, content_type) {
    var str = window.atob(input);
    var ab = new ArrayBuffer(str.length);
    var ia = new Uint8Array(ab);
    for (var i = 0; i < str.length; i++) {
        ia[i] = str.charCodeAt(i);
    }
    return new Blob([ia], {type: content_type});
}

var load = function() {
    // Get initial configuration from local storage, if any.
    var startval = get_config(true).value;

    // Create the editor.
    jsoneditor = new JSONEditor($editor, {
        schema: schema,
        startval: startval,
        theme: "bootstrap3",
        iconlib: "bootstrap3",
        trace_processing: false
    });
    
    // When the save button is pressed, save the config data to local storage.
    $save_data_button.addEventListener('click', function() {
        var config_json = get_string_value();
        localStorage.setItem("aprinter_config", config_json);
    });
    
    // When the reload button is pressed, load the config data from local storage.
    $reload_data_button.addEventListener('click', function() {
        var get_config_res = get_config(false);
        if (!get_config_res.ok) {
            alert("Cannot load - no configuration present in local storage!");
            return;
        }
        jsoneditor.setValue(get_config_res.value);
    });
    
    // Handler for the delete-saved-data button.
    $delete_saved_data_button.addEventListener('click', function() {
        localStorage.removeItem("aprinter_config");
    });
    
    // When the load-defaults button is pressed, load the default config.
    $load_defaults_button.addEventListener('click', function() {
        jsoneditor.setValue(default_config);
    });
    
    // If the window is about to be closed with unsaved data, ask for confirmation.
    window.onbeforeunload = function (evt) {
        if (JSON.stringify(get_config(true).value) == get_string_value()) {
            return null;
        }
        var message = 'APrinter Configuration: There are unsaved configuration changes!';
        if (typeof evt == 'undefined') {
            evt = window.event;
        }
        if (evt) {
            evt.returnValue = message;
        }
        return message;
    }
    
    // When the export button is pressed, trigger downloading of the configuration dump.
    $export_data_button.addEventListener('click', function() {
        var config_json = get_pretty_string_value();
        var blob = new Blob([config_json], {type: 'application/json;charset=utf-8'});
        saveAs(blob, 'aprinter_config.json')
    });
    
    // Import button handler.
    $import_data_button.addEventListener('click', function() {
        if (!$import_data_file_input.files[0]) {
            alert('Please select a configuration file to import.');
            return;
        }
        var reader = new FileReader();
        reader.onload = function() {
            var config = JSON.parse(this.result);
            jsoneditor.setValue(config);
        }
        reader.readAsText($import_data_file_input.files[0]);
    });
    
    // Compile button handler.
    $compile_start_button.addEventListener('click', function() {
        var compile_request = new XMLHttpRequest();
        compile_request.open("POST", "/compile", true);
        compile_request.setRequestHeader("Content-type", "application/json; charset=utf-8")
        
        compile_request.onreadystatechange = function() {
            if (compile_request.readyState == 4) {
                set_compile_status(false);
                
                if (compile_request.status != 200) {
                    alert("Compilation failed (request error)!");
                } else {
                    var result = JSON.parse(compile_request.responseText);
                    if (!result.success) {
                        alert("Compilation failed: " + result.message);
                    } else {
                        var blob = base64_to_blob(result.data, 'application/octet-stream');
                        saveAs(blob, result.filename)
                    }
                }
            }
        }
        
        compile_request.send(get_string_value());
        set_compile_status(true);
    });
}

load();
